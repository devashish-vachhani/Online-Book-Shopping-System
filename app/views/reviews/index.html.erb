<p style="color: green"><%= notice %></p>

<h1>Reviews</h1>
<div class="container">
  <div class="row">
      <div class="col-md-2">
        <%= render 'reviews/search_reviews' %>
      </div>
      <div class="col-md-10">
      <table class="table table-striped table-hover">
        <thead class="thead-dark">
          <tr>
            <% if @show_user %>
              <th>User</th>
            <% end %>
            <% if @show_book %>
              <th>Book</th>
            <% end %>
            <th>Rating</th>
            <th>Review</th>
          </tr>
        </thead>
        <tbody>
          <% @reviews.each do |review| %>
            <tr>
              <% if @show_user %>
                <td><%= review.user.username %></td>
              <% end %>
              <% if @show_book %>
                <td><%= review.book.name %></td>
              <% end %>
              <td><%= review.rating %></td>
              <td><%= review.review %></td>
              <% if can? :update, review %><td><%= link_to 'Edit', edit_review_path(review), class:'btn btn-primary btn-sm' %></td><% end %>
              <% if can? :destroy, review %><td><%= button_to "Delete", review, data: { turbo_confirm: "Are you sure?" }, method: :delete, class: "btn btn-danger btn-sm" %></td><% end %>
            </tr>
          <% end %>
        </tbody>
      </table>
      <%= link_to "Back to dashboard", authenticated_root_path %>
    </div>
  </div>
</div>
</div>